<!-- Main Header -->
<header class="main-header">

  <!-- Logo -->
  <a href="index2.html" class="logo">
    <!-- mini logo for sidebar mini 50x50 pixels -->
    <span class="logo-mini"><img src="../resources/Telepath_Logo_Part.JPG" height="50" width="50"/></span>
    <!-- logo for regular state and mobile devices -->
    <span class="logo-lg"><b>Telepath</b>Networks&nbsp;Inc.</span>
  </a>
  <!-- Header Navbar -->
  <nav class="navbar navbar-static-top" role="navigation">
    <!-- Sidebar toggle button-->
    <a href="#" class="sidebar-toggle" data-toggle="push-menu" role="button">
      <span class="sr-only">Toggle navigation</span>
    </a>
    <!-- Navbar Left Menu -->
    <div class="navbar-custom-menu" style="float:left">
      <ul class="nav navbar-nav">
        <p class="navbar-text" style="margin-top: 10px; margin-bottom: 0;font-size: 20px;"><b>I</b>ntelligent <b>P</b>rovisioning <b>C</b>enter</p>
      </ul>
    </div>
    <!-- Navbar Right Menu -->
    <div class="navbar-custom-menu">
      <ul class="nav navbar-nav">
        <!-- Wire Center Information -->
        <p class="navbar-text" style="margin-top:15px; margin-bottom: 0;">Alarm: <button id="alarm-header-icon" type="button" class="btn btn-block btn-xs"></button></p>
        <p class="navbar-text" style="margin-top:15px; margin-bottom: 0;">IPC: (<span id="header-ipcstat"></span>) <span id="header-time"></span> <span id="header-timezone"></span></p>

        <!-- Wire Center Information dropdown -->
        <li class="dropdown notifications-menu">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-info-circle"></i>
          </a>
          <ul class="dropdown-menu">
            <li class="header">Wire Center Information</li>
            <div style="padding: 7px 10px;">
              <li>WCN: <span id="header-wcn"></span></li>
              <li>WCC: <span id="header-wcc"></span></li>
              <li>NPANXX: <span id="header-npanxx"></span></li>
              <li>FRMID: <span id="header-frmid"></span></li>
            </div>
          </ul>
        </li>
        
        <!-- Messages: style can be found in dropdown.less-->
        <li class="dropdown messages-menu">
          <!-- Menu toggle button -->
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-envelope-o"></i>
            <span class="label label-success">4</span>
          </a>
          <ul class="dropdown-menu">
            <li class="header">You have 4 messages</li>
            <li>
              <!-- inner menu: contains the messages -->
              <ul class="menu">
                <li><!-- start message -->
                  <a href="#">
                    <div class="pull-left">
                      <!-- User Image -->
                      <img src="../LIBS/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">
                    </div>
                    <!-- Message title and timestamp -->
                    <h4>
                      Support Team
                      <small><i class="fa fa-clock-o"></i> 5 mins</small>
                    </h4>
                    <!-- The message -->
                    <p>Why not buy a new awesome theme?</p>
                  </a>
                </li>
                <!-- end message -->
              </ul>
              <!-- /.menu -->
            </li>
            <li class="footer"><a href="#">See All Messages</a></li>
          </ul>
        </li>
        <!-- /.messages-menu -->

        <!-- Notifications Menu -->
        <li class="dropdown notifications-menu">
          <!-- Menu toggle button -->
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-bell-o"></i>
            <span class="label label-warning">10</span>
          </a>
          <ul class="dropdown-menu">
            <li class="header">You have 10 notifications</li>
            <li>
              <!-- Inner Menu: contains the notifications -->
              <ul class="menu">
                <li><!-- start notification -->
                  <a href="#">
                    <i class="fa fa-users text-aqua"></i> 5 new members joined today
                  </a>
                </li>
                <!-- end notification -->
              </ul>
            </li>
            <li class="footer"><a href="#">View all</a></li>
          </ul>
        </li>

        <!-- Tasks Menu -->
        <li class="dropdown tasks-menu">
          <!-- Menu Toggle Button -->
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-flag-o"></i>
            <span class="label label-danger">9</span>
          </a>
          <ul class="dropdown-menu">
            <li class="header">You have 9 tasks</li>
            <li>
              <!-- Inner menu: contains the tasks -->
              <ul class="menu">
                <li><!-- Task item -->
                  <a href="#">
                    <!-- Task title and progress text -->
                    <h3>
                      Design some buttons
                      <small class="pull-right">20%</small>
                    </h3>
                    <!-- The progress bar -->
                    <div class="progress xs">
                      <!-- Change the css width attribute to simulate progress -->
                      <div class="progress-bar progress-bar-aqua" style="width: 20%" role="progressbar"
                            aria-valuenow="20" aria-valuemin="0" aria-valuemax="100">
                        <span class="sr-only">20% Complete</span>
                      </div>
                    </div>
                  </a>
                </li>
                <!-- end task item -->
              </ul>
            </li>
            <li class="footer">
              <a href="#">View all tasks</a>
            </li>
          </ul>
        </li>
        
        <!-- Database Dropdown Menu -->
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <i class="fa fa-database"></i>
          </a>
          <ul class="dropdown-menu">
            <li id="backup-database">
              <a>Backup Database</a>
            </li>
            <li>
              <a>Something else Database</a>
            </li>
          </ul>
        </li>
        
        <!-- User Account Menu -->
        <li class="dropdown user user-menu">
          <!-- Menu Toggle Button -->
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            <!-- The user image in the navbar-->
            <img src="../LIBS/dist/img/user2-160x160.jpg" class="user-image" alt="User Image">
            <!-- hidden-xs hides the username on small devices so only the image appears. -->
            <span id="top-nav-user-name" class="hidden-xs">Alexander Pierce</span>
          </a>
          <ul class="dropdown-menu">
            <!-- The user image in the menu -->
            <li class="user-header">
              <img src="../LIBS/dist/img/user2-160x160.jpg" class="img-circle" alt="User Image">

              <p>
                <span id="profile-dropdown-user-name">Alexander Pierce</span> - <span id="profile-dropdown-user-group">Web Developer</span>
                <small>Member since Nov. 2012</small>
              </p>
            </li>
            <!-- Menu Body -->
            <li class="user-body">
              <div class="row">
                <div class="col-xs-4 text-center">
                  <a href="#">Followers</a>
                </div>
                <div class="col-xs-4 text-center">
                  <a href="#">Sales</a>
                </div>
                <div class="col-xs-4 text-center">
                  <a href="#">Friends</a>
                </div>
              </div>
              <!-- /.row -->
            </li>
            <!-- Menu Footer-->
            <li class="user-footer">
              <div class="pull-left">
                <a href="#" class="btn btn-default btn-flat">Profile</a>
              </div>
              <div class="pull-right">
                <a id="logout-btn" href="#" class="btn btn-default btn-flat">Sign out</a>
              </div>
            </li>
          </ul>
        </li>

        
      </ul>
    </div>
  </nav>
</header>

<!-- LOGOUT MODAL -->
<div class="modal fade" id="logout-modal">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">Logging out...</h4>
      </div>
      <div class="modal-body"></div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  function updateUsername() {
    $('#top-nav-user-name, #profile-dropdown-user-name').text(user.fname + ' ' + user.lname);
    $('#profile-dropdown-user-group').text(user.ugrp);
  }

  function updateHeaderInfo() {
    let alarmText = '';
    let alarmColor = '';

    if (wcInfo.sev === 'CRI') {
      alarmText = 'CRITICAL';
      alarmColor = 'bg-critical';
    } else if (wcInfo.sev === 'MAJ') {
      alarmText = 'MAJOR';
      alarmColor = 'bg-major';
    } else if (wcInfo.sev === 'MIN') {
      alarmText = 'MINOR';
      alarmColor = 'bg-minor';
    } else if (wcInfo.sev === 'NONE') {
      alarmText = 'NONE';
      alarmColor = 'bg-no-alarm';
    }

    $('#alarm-header-icon').text(alarmText);
    $('#alarm-header-icon').attr('class','btn btn-block btn-xs');
    $('#alarm-header-icon').addClass(alarmColor);


    $('#header-wcn').text(wcInfo.wcname);
    $('#header-wcc').text(wcInfo.wcc);
    $('#header-npanxx').text(wcInfo.npanxx);
    $('#header-frmid').text(wcInfo.frmid);
    $('#header-ipcstat').text(wcInfo.ipcstat);
    
    let time = moment(wcInfo.time);

    $('#header-time').text(moment().format('MM-DD-YYYY HH:mm'));
    $('#header-timezone').text(wcInfo.tzone);
  }

  $(document).ready(function() {

    // Watches logout modal, on close reload page
    $('#logout-modal').on('hidden.bs.modal', function(e) {
      location.reload();
    });

    // Click event for logout button
    $('#logout-btn').click(function() {
      logout('manual logout');
    });

  });
</script>