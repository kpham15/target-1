<div id="matrix-modal" class="modal fade">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
        <h4 class="modal-title">LOCK/UNLOCK MATRIX CARD</h4>
      </div>

      <div class="modal-body">

        <form class="form">
          <!-- ROW 1: NODE, SHELF, SLOT, TYPE -->
          <div class="row">
            <div class="col-md-2">
              <div class="form-group">
                <label>NODE</label>
                <input type="number" class="form-control matrix-modal-input" id="matrix-modal-node" target="node" disabled>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>SHELF</label>
                <input type="number" class="form-control matrix-modal-input" id="matrix-modal-shelf" target="shelf" disabled>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>SLOT</label>
                <input type="number" class="form-control matrix-modal-input" id="matrix-modal-slot" target="slot" disabled>
              </div>
            </div>
            <div class="col-md-2">
              <div class="form-group">
                <label>TYPE</label>
                <input type="text" class="form-control matrix-modal-input" id="matrix-modal-type" target="type" disabled>
              </div>
            </div>
          </div>
          <!-- END ROW 1 -->
        </form>

        <!-- Action Field -->
        <div class="row">
          <div class="col-md-3">
            <div class="form-group">
              <label>ACTION</label>
              <input type="text" class="form-control matrix-modal-input" id="matrix-modal-action" action="" readonly>
            </div>
          </div>
        </div>

      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-default pull-left" data-dismiss="modal">Close</button>
        <button id="matrix-modal-submit" type="button" class="btn btn-primary">Submit</button>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">

  function matrixModalSubmit(action) {

  }

  $(document).ready(function() {
    // WHEN MODAL IS HIDDEN
    $("#matrix-modal").on('hidden.bs.modal', function() {
      $(".matrix-form-input").val("").change();
      $('#matrix-card-table tbody tr').removeClass('bg-primary');
    });

    // SUBMIT BUTTON
    $("#matrix-modal-submit").click(function() {
      let action = $("#matrix-modal-action").attr('action');
      $.ajax({
        type: "POST",
        url: ipcDispatch,
        data: {
          api:    "ipcMxc",
          act:    action,
          user:   user.uname,
          id:     $("#matrix-modal-id").val(),
          node:   $("#matrix-modal-node").val(),
          shelf:  $("#matrix-modal-shelf").val(),
          slot:   $("#matrix-modal-slot").val(),
          type:   $("#matrix-modal-type").val(),
        },
        dataType: 'json'
      }).done(function(data) {
        let res = data.rows;
        let modal = {
          title: data.rslt,
          body: data.reason,
        }
        if (data.rslt === 'fail') {
          modal.type = 'danger';
          modalHandler(modal);
        } else {
          if (action == "VIEW_PORT_STATUS") {
            if (res.length === 0) {
              modal.type = 'danger';
              modal.body = 'No records found';
              modalHandler(modal);
            } else {
              // INITIALIZE VIEW PORT TABLE

              // ALERT OBJ.RSLT

              // HIDE MODAL

              // DISPLAY VIEW PORT TABLE
              
              modal.type = "success";
              modalHandler(modal);
            }
            $("#matrix-form-action").val("");
            return;
          }
          modal.type = 'success';
          modalHandler(modal);
          queryMatrixCards();
        }
      });
    });
  });
</script>