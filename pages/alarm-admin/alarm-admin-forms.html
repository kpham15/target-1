<!-- Forms Left Side -->
<div class="col-md-5">
  <form id="alarm-admin-forms-left">
    <!-- Top Row Left -->
    
    <div class="row">
      <!-- Hidden ID Field -->
      <input id="alarm-admin-forms-id" type="hidden" class="alarm-admin-forms-input">
      <!-- ALMID -->
      <div class="col-md-3">
        <div class="form-group">
          <label>ALMID:</label>
          <input id="alarm-admin-forms-almid" class="form-control alarm-admin-forms-input" disabled="">
        </div>
      </div>

      <!-- SOURCE -->
      <div class="col-md-9">
        <div class="form-group">
          <label>SOURCE:</label>
          <input id="alarm-admin-forms-source" class="form-control alarm-admin-forms-input" disabled="">
        </div>
      </div>
    </div>

    <!-- Row 2 -->
    <div class="row">
      <!-- ACK -->
      <div class="col-md-3">
        <div class="form-group">
          <label>ACK</label>
          <input id="alarm-admin-forms-ack" class="form-control alarm-admin-forms-input" disabled="">
        </div>
      </div>

      <!-- CONDITION -->
      <div class="col-md-9">
        <div class="form-group">
          <label>CONDITION:</label>
          <input id="alarm-admin-forms-condition" class="form-control alarm-admin-forms-input" disabled="">
        </div>
      </div>
    </div>
    <!-- Action Row -->
    <div class="row">
      <div class="col-md-3">
        <div class="form-group">
          <label>ACTION:</label>
          <select id="alarm-admin-forms-action" class="form-control alarm-admin-forms-input">
            <option></option>
            <option value="ACK">ACK</option>
            <option value="UN-ACK">UN-ACK</option>
            <option value="CLR">CLR</option>
          </select>
        </div>
      </div>
    </div>
    <div style="margin-bottom: 10px">
      <!-- Refresh Button -->
      <button id="alarm-admin-forms-refresh" type="button" class="btn btn-primary btn-flat">
        Refresh
      </button>
    </div>
  </form>
</div>
<!-- Forms Right Side -->
<div class="col-md-7">
  <form id="alarm-admin-forms-right">
    <div class="row">
      <!-- Comments -->
      <div class="col-md-12">
        <div class="form-group">
          <label>COMMENTS:</label>
          <textarea id="alarm-admin-forms-comments" class="form-control alarm-admin-forms-input" rows="5" disabled=""></textarea>
        </div>
      </div>
    </div>
  </form>
</div>

<script type="text/javascript">


$(document).ready(function() {
  
  // Refresh Button Click Event
  $('#alarm-admin-forms-refresh').click(function() {
    $('.alarm-admin-forms-input, .alarm-admin-modal-field').val('');

    clearErrors();

    queryAlarmAdmin();
  })

  // Click event for sidebar, loads page first time
	$('.menu-item[page_id="alarm-admin-page"]').click(function() {
		queryAlarmAdmin();
  })
  
  // Change event on Action
  $('#alarm-admin-forms-action').change(function() {
    let value = $(this).val();

    
    let id = $('#alarm-admin-forms-id').val();
    let almid = $('#alarm-admin-forms-almid').val();
    let source = $('#alarm-admin-forms-source').val();
    let ack = $('#alarm-admin-forms-ack').val();
    let condition = $('#alarm-admin-forms-condition').val();
    let action = $('#alarm-admin-forms-action').val();
    
    clearErrors();
    
    if (almid == "") {
      inputError($('#alarm-admin-forms-action'),'Select an item from list of tables')
      return;
    }
    // ACKNOWLEDGE action
    else if (value == 'ACK') {
      if (ack !== "") {
        inputError($('#alarm-admin-forms-ack'),'Alarm already acknowledged!');
        return;
      }
      else {
        $('#alarm-admin-modal-almid').val(almid);
        $('#alarm-admin-modal-source').val(source);
        $('#alarm-admin-modal-ack').val(user.uname);
        $('#alarm-admin-modal-condition').val(condition);
        $('#alarm-admin-modal-action').val(action);
  
        $('#alarm-admin-modal').modal('show');
      }
    }
    // UN-ACKNOWLEDGE action
    else if (value == 'UN-ACK') {
      if (ack !== "ACK") {
        inputError($('#alarm-admin-forms-ack'),'Alarm is not yet Acknowledged!');
        return;
      }
    }
  });
});
</script>